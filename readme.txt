Post v5.0 Updates to the Now SMS/MMS Gateway:
=============================================


===========================
v5.50:       April 30, 2004
===========================

* MMS over GPRS/MM1:  Improved modem handling for GSM/GPRS modems.  Fix for difficulty setting the GPRS APN with some modems, where connections would fail because the GPRS APN setting was not being applied.

* MMSC:  UAProf for content conversion was not parsing content types correctly from UAProf for Nokia 6600.

* MM7:  When receiving MM7 content, the "charset=" parameter of the "Content-Type:" header of individual content pieces was only recognised if it was the first optional parameter following the content type.

* WAP Push:  URL prefixes other than "http://" and "https://" for the push URL were having any extra "http://" prefix added.

* E-mail to SMS:  Remove excess text headers from SMS messages.  Format for SMS generated is now:  "sender@domain.com /subject /message text"

* MMS Accounting Callbacks:  PreAuth for MM7 and MM1 message delivery now includes a list of recipients in the "&To=" parameter.  MMSSend transaction for message received from a VASP now includes the sender address in the "&From=" parameter, and the VASP from which the message was received is specified in the new "&VaspIn=" parameter.

* SMPP Client Accounts:  Messages were not properly logged when a message is submitted to NowSMS for delivery, and that message is routed locally to an account defined under "SMS Users".

* 2-way SMS:  Add support for command table to include different commands for messages received on different phone numbers.

* SMPP Server:  Message text for messages submitted using the optional parameter tag "message_payload" were not being parsed correctly.

* SMPP Server:  Add support for receiving messages submitted via "data_sm" PDU, in addition to "submit_sm".

* MMSC:  One of the updates between v5.0 and v5.01 related to MM4 internetworking caused a problem with delivery receipts.  Delivery receipts generated by the MMSC contained an incomplete message id, so clients could not properly match the delivery receipt with a sent message.

* MMSC:  Add support for routing MMS notifications to an IP address.  In the MMSC.INI file, it is possible to create an [IPNotify] section.  Under this section header, specify PhoneNumber=IP.Address (e.g., +9999999=192.168.1.200), to have MMS notifications for the specified phone number get routed to the specified IP address.  (This feature is intended primarily for testing environments.)

* MM4:  Add configuration parameter to allow extra headers to be inserted into the SMTP header for MMS messages.  In the VASPOUT\accountname\VASP.INI file, under the [VASP] header, add "ExtraHeader=header: text of header" or "ExtraHeader=header1: text of header\r\nheader2: text of header" (if multiple headers are to be included, insert the text \r\n between the headers).

* SMS Gateway:  When submitting "flash messages" (DCS=10), if the message text required Unicode encoding, NowSMS would change the DCS to Unicode encoding, but would discard the request that the message be sent as a flash.  The flash attributes are now preserved when sending messages that require Unicode encoding.

* 2-way SMS:  The processing of the queue of received messages is single threaded.  In some environments, it may be beneficial to enable multithreaded processing of the 2-way SMS command table.  To enable multithreaded processing of these commands, edit SMSGW.INI, and under the [SMSGW] section header, add 2WaySMSThreadCount=xx, where xx is a value greater than 1.

* UCP/EMI:  Fix for encoding/decoding problem for alphanumeric sender addresses.

* SMPP Server:  Fix for clients submitting multiple outstanding SMPP transactions.

* MM7:  Put quotes around "text/xml" in the type parameter of "Content-type: multipart/related" when submitting an MM7 message.  (Quotes are not included in examples from 3GPP MM7 spec, but a strict interpretation of the HTTP spec indicates that since the "/" character is present in the type value, the string should be quoted.)

* SMTP/MM4:  When routing a received message, if the "From:" address is in our local domain, attempt to present the sender address as a phone number rather than an SMTP address.  (Useful mainly for VASPs connecting via SMTP/MM4.)

* Fix for serialisation routines encountering problems in Windows 2003.

* Send MMS Message Web Interface:  Add SMSGW.INI configuration setting for specifying the default character set to pass to MMSCOMP.  To specify UTF-8 as the character set for text files submitted for MMS via the web interface, manually edit SMSGW.INI, and under the [SMSGW] section header, add MMSCOMPParameters=-cUTF-8

* Fix for problem parsing received MMS message coming from an MMSC that had used MIME encoding to encode a filename.  The resulting filename was invalid, and caused our MMS parsing logic to skip the file.

* Preliminary support for PAP (Push Access Protocol).  To submit PAP requests to send WAP push messages, post to a URL on the web interface port (same port as used to submit SMS messages via HTTP) of /PAP.  Either use basic authentication (HTTP "Authorization:" header) or include a username and password in the URL (/PAP?user=username&password=password) to submit via a user account defined on the "SMS Users" page of the NowSMS configuration dialog.

* XML Settings documents:  WAP Push Service Indication (SI) and Service Load (SL) XML documents can now be posted via the "Send XML Settings" interface.  NowSMS will automatically identify these documents based upon the presence of the "<si>" or "<sl>" XML tag, and convert them to the appropriate WBXML format for sending.

* XML Settings documents:  Add support for Wireless Village settings per the Nokia/Ericsson OTA Specification v7.1.  If the settings posted include an "<WVSettings>" XML tag, they will be assumed to be Wireless Village settings per this specification, and encoded with the appropriate WBXML.  These documents can be sent via the "Send XML Settings" dialog, or as a ".ota" file in the NowSMS "OTA" directory.

* CIMD:  Fix for problem where NowSMS was not properly receiving SMS messages (NowSMS did not like packet #0).

* 2-way SMS:  Tab characters in the message text were not being properly URL escaped.

* MMSC Outbound Routing:  Multiple outbound routes for MMS messages are processed concurrently, simliar to how multiple outbound routes for SMS messages are processed concurrently (previously only one outbound MMS message was routed at a time).  To have multiple MMS Outbound routes simultaneously act as the default outbound route, configure each route with "Route messages to this account for recipient phone number(s)" set to "*".

* SMPP:  Fix for problem routing Siemens SEO messages, or other binary messages which do not include UDH, where NowSMS could corrupt the content.

* Add support for OMA DRM v1.0 Rights documents.  These documents can be sent via the "Send XML Settings" dialog, or as a ".ota" file in the NowSMS "OTA" directory.  These documents can also be posted via PAP using either text or binary format.

* Fix for 2-way SMS problem where received messages would be truncated at approximately 1000 characters.

* SMPP:  Fix for problem where original sender address was lost when routing a message to an SMPP client (defined locally to NowSMS in the "SMS Users" list), when the "Forced Sender" field is set.

* Forward-lock:  Add support for forward lock content for multimedia WAP push.  If the MMSForwardLock variable is set when submitting a multimedia WAP push, non-text content files will have the forward lock attribute applied.  Forward lock support also implemented when sending MMS messages, however testing has revealed unexpected results using forward-lock within MMS message content with current generation mobile phones.

* OMA OTA Settings:  Fix for problem using the IMSI as a network PIN when the IMSI is 14 digits long instead of 15.

* MMSC:  The Maxon O2 X1 does not display images in messages were the SMIL file references images by content-id (cid:) instead of filename (Nokia Series 40 phones always reference by content-id in MMS messages they create).  A configuration setting was added to force the NowSMS MMSC to change all "cid:" references within SMIL files to filename references to address this problem.  To enable this setting, under the [MMSC] section in MMSC.INI, add ReplaceCIDinSMIL=Yes.
 
* XML Settings:  Add support for OMA E-Mail Notification v1.0 documents.  If the settings posted include an "<emn>" XML tag, they will be assumed to be an OMA E-Mail Notification per this specification, and encoded with the appropriate WBXML.  These documents can be sent via the "Send XML Settings" dialog, or via the PAP interface using a MIME type of "text/vnd.wap.emn+xml"

* MM7:  Fix for the "Sender address" not appearing consistently when routing received messages to an MM7 client connection.

* MMSCOMP:  -c parameter (character set) was not applied to the encoding of the MMS subject header.

* MMSC:  Vodafone UK now requires that content providers use different URLs for adult vs. non-adult content.  When sending MMS or Multimedia WAP push via NowSMS, the URL that NowSMS generates includes the "Local Host Name or IP Address" that is specified on the "MMSC" page of the NowSMS configuration.  It is now possible to override that host name in generated URLs based upon the MMS Sender address ("MMSFROM" parameter when using NowSMS proprietary URL submission) that is specified in a submitted message.  Within the MMSC.INI, it is possible to define a section titled [HostNameSenderOverride].  Under that section, specify a sender address and the alternate host name to use for notifications generated by that sender (e.g., +447778001212=212.100.225.164 or nowsms@now.co.uk=contentserver1.now.co.uk).

* MMS/Multimedia WAP Push:  Fix for problem where "MMSFILE" parameter pointing to a URL did not like a URL that included a "?" character, as parsing of the "MMSFILE" parameter expected the last part of the URL to be a valid filename.  Filename is now truncated at a "?" character.

* MM7:  Allow different MM7 schema URLs and MM7 versions to be defined for MM7 connections.  For each outbound "MMSC Routing", there is a configuration file located in VASPOUT\AccountName\VASP.INI.  In this configuration file, you can define the following settings under a [VASP] header:  MM7Version=; MM7Schema=; VASPID=; VASID=.   The default value for MM7Version is "5.3.0".  The default value for MM7Schema is "http://www.3gpp.org/ftp/Specs/archive/23_series/23.140/schema/REL-5-MM7-1-2".  There is no default value for the VASPID and VASID settings, which means that the VASPID and VASID elements will not be included when submitting a message over MM7 unless these values are specified.  These settings can also be applied for "MMSC VASP" defintions, where the configuration file is located in VASPIN\AccountName\VASP.INI.  The MM7Version and MM7Schema settings are supported for "MMSC VASP" definitions.

* Accounting Logs:  MMSRETRIEVE log entry updated to include sender phone number.  Also, the recipient phone number displayed in the MMSRETRIEVE log entry was not always in the same format as the recipient logged in the MMSIN log entry, the MMSRETRIEVE record now contains a recipient phone number in the same format as the MMSIN log entry.

* MMSC VASP Interface:  When an MMSC VASP is configured for received MMS messages to be received to the MMS-IN directory, NowSMS was not applying the "VASP Sender Address".  This caused problems for submissions from MM1 clients, where the MM1 client does not have a sender address configured.  The "VASP Sender Address" is now applied when receiving MMS messages to the MMS-IN directory.

* SMS Queue Processing:  New configuration options for specifying the retry delays when there is an error submitting a message.  (This applies only to errors when NowSMS is able connect to the SMSC or initialise the modem, but an error is returned.  This does not apply when the SMSC or modem is off-line.)  The following settings can be specified under the [SMSGW] section header of SMSGW.INI:  RetryDelay=#### specifies a number of seconds to wait to retry sending after an error condition, the default value is 30.  RetryDelayMultiplier=### specifies a multiplier to be applied for successive send failures, the default value is 1.  For each failed attempt, the retry delay will be the product of RetryDelay*RetryDelayMultiplier*#FailedAttempts.  To use a fixed retry delay of RetryDelay, specify RetryDelayMultiplier=0.  RetryDelayAfterAttempts=### specifies that the retry delay should only be applied after ### failed attempts, the default value is 2.  NowSMS will immediately retry a failed message send until it has made RetryDelayAfterAttempts, after which it will apply a retry delay.  RetryMaxAttempts=### specifies the maximum number of retries that NowSMS will attempt before a message is rejected, the default value is 20.

* GSM Modem Processing:  New configuration options for specifying a forced delay after a message is successfully sent over a GSM modem interface, or after a failed message sent attempt over a GSM modem interface.  This setting can be useful for modems that encounter problems with the speed at which NowSMS attempts to send messages.  In the appropriate [Modem Name] section of the SMSGW.INI file, the following settings can be specified:  DelayAfterSend=#### specifies a number of milliseconds to wait after successfully sending a message (1000 milliseconds = 1 second).  DelayAfterError=#### specifies a number of milliseconds to wait after a message send attempt fails.

* Web interface updates to support an address book.

* Support added for additional modem initialisation commands.  In the appropriate modem section of the SMSGW.INI file, the following configuration parameters are supported:
  CommandPreInit#=modem commmand
  CommandPostInit#=modem command
  CommandPreSend#=modem command
  CommandPostSend#=modem command

Substitute # with a number, starting at 1, and increasing sequentially for each additional command to be sent.  CommandPreInit is sent before NowSMS performs its modem initialisation sequence.  CommandPostInit is sent after NowSMS performs its modem initialisation sequence.  CommandPreSend is sent before NowSMS attempts to send a message using the modem.  CommandPostSend is sent after NowSMS attempts to send a message using the modem.  Examples:

  CommandPreInit1=ATZ
  CommandPreInit2=ATE0V1
  CommandPreInit3=AT+CSMS=0

* SMPP:  Add configuration parameter under [SMPP - ip.address:port] section of SMSGW.INI.  ServiceType=xxxxxx can provide a service_type value to be submitted to the SMSC when submitting messages.

* UCP/EMI:  Add configuration parameter under [UCP - ip.address:port] section of SMSGW.INI.  InternationalPrefix=xx is used to specify a prefix to be added to a phone number (e.g., 00) when sending to an international recipient.

* HTTP SMSC Interface:  Add configuration parameter under [Modem Name] section of SMSGW.INI.  Charset=charsetName is used to specify that NowSMS should convert text messages to a particular character set before attempting to submit them to the specified HTTP SMSC.  The default character set encoding for NowSMS is UTF-8.  Other encodings supported include iso-8859-1, us-ascii, big5 (big-5), gb2312 (gbk, gb2312-80), shift-jis (shift_jis), iso-8859-2, iso-8859-4, iso-8859-5, iso-8859-6, iso-8859-7, iso-8859-8, iso-8859-9.

* SMPP:  Add configuration parameter under [SMPP - ip.address:port] section of SMSGW.INI.  If WDPAdaptation=Yes, NowSMS will submit WAP push messages following the WDP and WCMP Adapation guidelines published by the OMA/WAP Forum.  This will allow WAP push and MMS support over CDMA with compatible SMPP gateways that support WDP Adaptation and the WAP CDMA Teleservice.

* Web interface - charset parameter now applies to the "Text", "MMSSubject" and "MMSText" parameters.  If "charset=xxx" is specified in a URL request, NowSMS will convert the data specified any of these parameters to UTF-8.  Cncodings supported include iso-8859-1, us-ascii, big5 (big-5), gb2312 (gbk, gb2312-80), shift-jis (shift_jis), iso-8859-2, iso-8859-4, iso-8859-5, iso-8859-6, iso-8859-7, iso-8859-8, iso-8859-9.

* Receive MMS Messages to File:  If a message contains multiple files with duplicate names, previous versions would overwrite the contents of the first file with the content of subsequent file parts.  The web interface will still exhibit this behaviour.  When submitting messages through the web interface, each file name must be unique.

* Add support for sending EMS in a CDMA environment when connecting to an SMPP-based SMSC that supports the WEMT teleservice.  Manually edit SMSGW.INI, and under the [SMPP - ip.address:port] section of SMSGW.INI, add EMSServiceType=WEMT.  This causes NowSMS to set the service type to WEMT when submitting a message in EMS format.

* Sending pre-compiled MMS file through web interface:  Fix for a bug that could occur when sending a pre-compiled MMS message through the web interface, where NowSMS will not properly override the recipient list of the pre-compiled MMS message with a list of recipients specified in the send request.

* MM7 VASP:  Allow VASP account name and password to be specified in the URL of the MM7 post, using the format /mm7/accountname=password

* Receiving VASP Messages:  When routing a received message to the MMS-IN directory, recipient information was not being recorded in the received message file.

* Receiving MM7 messages:  In a message received from a service provider, a recipient address is not required.  If the "MMSC Routing for Received Messages" is set to a value other than "Standard MMS Delivery", NowSMS will now accept messages that do not include a recipient address.  If the routing is specified to forward to an e-mail address, NowSMS will insert that e-mail address as the recipient.  If the routing is specified to forward via MM7 or to write the message to the MMS-IN directory, NowSMS will insert a dummy recipient address of "unknown@unknown.com".  To override this address, edit VASPIN\accountname\VASP.INI, and under the [VASP] section header, add DefaultRecipient=address.


* MMSC to E-mail:  Add MMSC.INI configuration parameter, under [MMSC] section header, RemovePlusFromEMail=Yes will configure NowSMS to remove the plus sign from e-mail addresses that it generates when sending from an MMS sender to e-mail.

* SMS Gateway Logs: SMSIN log now receives the recipient address in the log file entry.

* WAP SL Push:  Interpretation of the WAPSLACTION parameter encoded the wrong values for "execute-high" and "execute-low" ("execute-high" was sent out with the binary code for "execute-low" and vice versa).

* MMSC:  To simplify the process of routing short codes to VASPs, configuration setting added to MMSC.INI, under [MMSC] header.  ShortcodeMaxLength=# specifies the maximum length in digits, of a short code.  If the length of a recipient phone number is less than or equal to this value, the MMSC will not perform any conversions (such as adding the default country code) on the recipient address.

* Modify Short Code Processing logic.  Short codes can be used to map a short phone number to a longer phone number or e-mail address.  Short codes can also be used to map an e-mail address to a short code that is route to a VASP.

  For example, a short code of 200 could be rerouted to an e-mail address.  To
  define short codes, create a section titled [ShortCode] in the MMSC.INI file.
  Under that section, create entries in the following format:
     ###=+44335830375474/TYPE=PLMN
     ###=user@domain.com
  In the examples above, "###" is a numeric short code address, and the value after
  the "=" sign is the address the short code should be rerouted to, specified as
  either a phone number in MMS addressing format (/TYPE=PLMN) or as an e-mail
  address.
  Similarly, to route an e-mail address to a short code that is routed via a VASP, use the following format:
     user@domain.com=6000/TYPE=PLMN


========================
v5.01 - January 12, 2004
========================

* SMPP:  Add configuration parameter under [SMPP - ip.address:port] section of SMSGW.INI.  If ReceiveSingleConnection=Yes, NowSMS will bind to the SMPP server as a transceiver to send and receive over a single connection, instead of establishing a separate connection for receiving messages.

* SMSGW:  Add support for sending UDH with a text message.  If UDH is specified in a submitted message, but the "Text" or "Data" parameter does not contain a valid hex string, NowSMS will convert the message text appropriately.  This simplifies the process of sending text messages with an EMS header.

* SMSGW:  Fix for problem where COM port numbers beyond COM9: would not always appear in the list to be selected.

* MMSC:  Fix for connection to operator network over GPRS where setting the GPRS access point did not always work on a Nokia 6600.  (NowSMS would report "unable to connect to wap gateway" ... because it was connecting to the wrong GPRS access point.)

===========================
Patch 4:  December 30, 2003
===========================

Files Updated (cumulative):  SMSGW.EXE, SMSGWS.EXE, SMSSMPP.DLL, MMSC.EXE, MMSCDLL.DLL, MMSWAP.DLL, MMSCTYPE.INI, SMSUCP.DLL, SMSCIMD.DLL

* SMPP:  Fix for "Address Range" configuration parameter not being passed to the SMPP bind.

* Fix for problem connecting to WAP gateway over GPRS in some configurations where WAP gateway redirects are used (most notably with O2 UK).

* Improve SMS receiving support to address a problem receiving binary SMS messages with the Nokia 30.  For more information, see http://www.nowsms.com/discus/messages/485/1477.html.

* Improve SMS receiving support to address a problem receiving SMS messages using the Eagletec GSM/GPRS CF Card.

* MMS/Multimedia WAP Push:  Add configuration parameter to delete dynamically generated links (such as those used when sending MMS or Multimedia WAP Push) after they are accessed.  To enable this feature, edit MMSC.INI, and under the [MMSC] section header, add ExpireDynamicLinks=##, where ## is the number of minutes after the link is first accessed before it should be automatically deleted.

* Fix for MMS Accounting callbacks not being called when MMS message is routed to a VASP.

* MM4:  Configuration setting added for routing MM4 acknowledgements to the proper SMTP host.  The configuration dialogs now allow a setting for MM4 Ack's to be routed via a defined MM4 MMSC Outbound Route.

* Fix for "X-Mms-Read-reply" header not being maintained through an MM4 connection.

* When routing MMS to SMTP, honor delivery report and read reply flags to attempt to request same in the resulting SMTP message.

* MMSC:  Add MMSC.INI configuration setting, under [MMSC] section header, DebugLogDirectory=d:\path\ can be used to set the path for the MMSCDEBUG.LOG.

* MMSC:  Fix for logging problems when a user account defined under "SMS Users" submits MMS messages via SMTP.

* MM7:  Update XML schema reference to REL5-MM7-1-2 from REL5-MM7-1-0.

* WAP Multimedia Push:  Fix for a problem with URL links to multimedia content files that include a space in the filename.

* Content Adaptation was not properly downloading User Agent profiles for "Profile:" headers that included quotes around the URL, such as the Alcatel OT535.

* MM7:  Fix for XML name space error in MM7 messages generated by the gateway.  We were following MM7 examples in 3GPP TS 23.140 version 5.4.0, but there was an XML name space error that was corrected by later versions of the specification.

* MMS connections to operator MMSC over GPRS/WAP:  Improvements in receive logic to better overcome from transmission error retries.

* MM4:  If an Ack is requested, bu tthe X-Mms-Originator-System header is not defined, send the Ack to the Sender address.

* MM7:  Fix for parsing problems, especially with "Sender" field.

==========================
Patch 3:  November 19, 2003
==========================

Files Updated:  SMSGW.EXE, SMSGWS.EXE, SMSSMPP.DLL, MMSC.EXE, MMSWAP.DLL, MMSCTYPE.INI, SMSUCP.DLL, SMSCIMD.DLL

* Add the ability to route MMS messages to different outbound "MMSC Routing" defintions, based upon the sender address specified in the MMS message (similar to how this already works for routing SMS messages).  When routing an MMS message, NowSMS will look for a match between the sender address in the message, and the default sender address defined for any "MMSC Routing" definitions.  When a match is found, the MMS message will be routed outbound via the specified "MMSC Routing".

* Add a configuration setting to enable SMS over GPRS on a per modem basis.

* When testing the connection to an HTTP SMSC, do not generate a GET request, only verify that it is possible to connect to the server.

* When sending out concatenated SMS messages, use care to ensure that all segments of a message get routed through the same SMSC connection.

* 2-way SMS:  If command returns a blank response, do not send a reply message via SMS.

* MMS connections to operator MMSC over GPRS/WAP:  Fix for bug that did not like any leading "0" digits within an IP address (e.g., 213.48.20.10 would work, but 213.048.020.010 would fail).

* Added SMSGW.INI configuration parameter, under section header that defines an SMPP connection.  The setting LongSMSAlt=Yes enables alternate encoding logic for submitting long text messages.  If you are connecting to an SMPP based SMSC, and receive garbage messages when sending long text messages, enable this setting.

* Add configuration parameter support for forcing messages routed through an MM7 "MMSC Routing" connection to either mm7_submit.REQ or mm7_deliver.REQ format.  (By default, the message type defaults to the message type that was set in the message that was received by the gateway.  E.g., if an MMS message was received over a GSM/GPRS modem connection, and routed out via MM7, the message would be in mm7_deliver.REQ format.  If a message was submitted to NowSMS for delivery, and routed out via MM7, the message would be in mm7_submit.REQ format.)  To force all messages routed out via an MM7 connection to mm7_submit.REQ format, edit VASPOUT\vaspname\VASP.INI, and under the [VASP] section header, add mm7SubmitReq=Yes.  Similarly, to force messages to to mm7_deliver.REQ format, edit VASPOUT\vaspname\VASP.INI, and under the [VASP] section header, add mm7DeliverReq=Yes.


==========================
Patch 2:  November 1, 2003
==========================

Files Updated:  SMSGW.EXE, SMSGWS.EXE, SMSSMPP.DLL, MMSC.EXE, MMSWAP.DLL, MMSCTYPE.INI, SMSUCP.DLL, SMSCIMD.DLL

* SMS Gateway was not properly encoding the Euro symbol.  Messages that included a Euro character were being sent out using Unicode encoding when this was not necessary.

* Fix for MM1/EAIF "MMSC VASP" account parsing.  VASP name would appear corrupted in the log files.

* Update MMSCTYPE.INI to define a default MIME type for the ".dm" extension as "application/vnd.oma.drm.message".

* MM4/SMTP Receiver: Allow MM4/SMTP receiver to properly handle "application/vnd.oma.drm.message" content.

* MM7 Receiver:  Fix bug that prevented messages that included binary content with embedded NULL characters from being processed.  When including binary content in an MM7 message, it is recommended that you include a "Content-Length:" header in any body parts that include binary content.

* Fix for a problem where text of inbound received messages could be truncated if an "@" character appeared on an 8 character boundary.

* The following MM4 headers were not properly encoded as "quoted strings":  X-Mms-Transaction-ID and X-Mms-Message-ID.

* Fix for MM1/EAIF "MMSC VASP" account requiring a username and password.  (Account name as IP address was not working properly for MM1 or EAIF connections to the NowSMS gateway.)

* Fix for MMS send/receive over GPRS not properly recognising "Network:" connections (like used by the Sierra Wireless Aircard 750) on non-English versions of Windows.

* When receiving messages via SMTP, support SMTP content where SMIL files reference other content pieces by "Content-id:" references.

* Fix for routing to SMS connection based upon recipient address masks not working properly in some configurations.

* "2-way SMS":  Add support for "command to execute" definition of "mailto:@@SMSPREFIX@@".  This command is used to facilitate SMS to e-mail gateway functionality.  If the first text of the SMS message is an e-mail address, then the message is forwarded to this address via e-mail.

* Fix for problems processing extremely long SMS messages through the "2-way" command facility.

* Add function to configuration interface for clearing the event log.

* Additional parameters supported for setting TON and NPI values.  The following parameters can now be specified in SMSGW.INI, under either a section header titled [SMPP] (to apply for all SMPP SMSC connections), or under the individual section header for a particular SMPP SMSC connection (e.g., [SMPP - ip.address:port] section):

  SourceTON=
  SourceNPI=
  DestTON=
  DestNPI=
  BindTON=
  BindNPI=

If these values are not set, the default behaviour is as follows:

SourceTON = 1 when the sender address for a submitted message is in international format (first character is "+"), SourceTON = 0 when the sender address is not in international format (first character is not "+"), SourceTON = 5 when the sender address is alphanumeric.

SourceNPI = 0 when the sender address is blank or alphanumeric format.  SourceNPI = 1 in all other conditions.

DestTON = 1 when the recipient address for a message is in international format (first character is "+"), DestTON = 0 when the recipient address is not in international format (first character is not "+").

DestNPI = 1.

BindTON = 0.

BindNPI = 0.


==========================
Patch 1:  October 17, 2003
==========================

Files Updated:  MMSC.EXE, MMSCDLL.DLL

* Fix for problem in MMSC where a Samsung P400 was not able to send a message via the MMSC.  When specifying the "To" recipient, the P800 includes character set information which the MMSC was interpreting incorrectly.

* Fix for MM7 VASP interface recipient parsing.  Previous versions expected multiple recipients to be specified under a single <To>, <Cc> or <Bcc> element (all 3 elements could exist, but if multiple "To" recipients existed, it was expected that they would all occur within a single <To> element).  This fix now supports multiple occurrences of these elements.  An example of the problem can be found at:  http://www.nowsms.com/discus/messages/485/842.html

* Fix for MM7 VASP interface having a problem with messages that included more than 200 to 300 recipients.

* Fix for problem with "MMSC VASP" configuration dialog.  The configuration dialog would not properly enable the "Route via MM7" option for processing received messages (at least one external MM7 link must be defined in the "MMSC Routing" table for this option to be enabled).


Now SMS/MMS Gateway v5.0
========================

The primary new features of the v5.0 release: 

1.) Support for routing MMS messages via external MMSC connections.
    Similar to how routing prefixes can be defined for routing SMS messages
    to different SMSCs, this version supports routing MMS messages to
    different MMSC connections with support for: 

    * Direct MMS Delivery (NowSMS is the MMSC, as in previous versions) 

    * MM7 (XML/SOAP based API over HTTP POST) 

    * MM4 (SMTP based API) 

    * MM1 (HTTP POST of binary MMS content, the protocol used for
      phone-to-phone MMS)

    * EAIF (Nokia variation of MM1 defined as an interface into their
      MMSC product) 

    * Convert MMS message to Multimedia WAP Push


2.) When receiving MMS messages, NowSMS can now automatically initiate
    a GPRS connection and fetch the MMS message content from the operator
    MMSC over GPRS and WAP. (This is necessary to enable the receipt of
    MMS messages from many operator systems.) 

3.) Outbound MMS messages can be routed via an MM1 connection to an
    operator MMSC over GPRS and WAP, allowing messages to be submitted
    into an operator MMSC over a GPRS/GSM modem. 

4.) When receiving MMS messages, in addition to the file-based interface,
    NowSMS can be configured to automatically parse the MMS content and
    forward it to an e-mail address, or to an MM7 client. 

5.) VASP (Value Added Service Provider) accounts can be enabled on the
    gateway which allow other applications to submit messages to the gateway
    using MM7, MM4, MM1 or EAIF. 

6.) Support for sending SyncML Settings per the Nokia/Ericsson OTA Specification. 

7.) Support for sending OMA WAP Provisioning Content, as defined by the OMA
    WAP Provisioning Content Specification. 



Post-v4.20 Changes
==================

* May 9, 2003:  Fix for exception error sending to most larger distribution
  lists via the web interface.

* May 20, 2003:  Support "Sender" variable for SMS Sender address when
  submitting multimedia WAP push.

* May 21, 2003:  Add support for sending SyncML OTA Settings.

  The gateway now supports OTA documents containing "SyncML settings",
  compatible with the Nokia/Ericsson "Over The Air Settings Specification",
  with support up to v7.0.

  This specification can be downloaded from the developer area of either
  the Nokia or Ericsson web sites.

  Three approaches are provided for sending SyncML OTA messages:

  1.) The “web menu” interface of the gateway provides a menu based interface
      for specifying SyncML configuration settings.

  2.) URL parameters can be passed to the gateway to dynamically define SyncML
      configuration settings.

  3.) Create an OTA document based on the Nokia/Ericsson specification, and POST
      this document programatically to the gateway using a URI of:
        /?PhoneNumber=xxxxxxxxxx&OTA=POST
      The POST request must include a "Content-length:" parameter in order to
      be understood by the gateway.

  In this help file, we'll only provide details on the supported URL parameters.

  Using the SyncML OTA URL parameters requires a good understanding of the
  Nokia/Ericsson OTA Specification.  This document specifies the mapping of gateway
  URL parameters to OTA setting parameters.  The value provided for the gateway
  URL parameter is applied to the corresponding OTA setting parameter.  Please
  refer to the Nokia/Ericsson specification for documentation of the OTA setting
  parameters.

  OTASYNCML_NAME - (REQUIRED) Specifies a descriptive name for the settings.
  Maps to the "Name" element in the specification.

  OTASYNCML_HOSTADDR - (REQUIRED) Specifies the Sync Server URL.  Maps to the
  "HostAddr" element in the specification.  Note that while the specification
  states that the path should not include a port number (e.g., http://server:port/path),
  some mobiles require that the port number be specified in the URL (unless
  the default port 80 is used).

  OTASYNCML_PORT - Specifies the port for the Sync Server URL.  Maps to the "Port"
  element in the specification.

  OTASYNCML_CONTACTS_URI - Specifies the URI (relative to Sync Server URL or absolute)
  for Contacts.  Maps to the "URI" element in the specification, under a "RemoteDB"
  element that includes a "CTType" of either text/x-vcard or text/vcard.  On most
  phones this is referred to as the Contacts Database Name.

  OTASYNCML_CONTACTS_CTTYPE - Specifies the MIME content type for contacts.  This value
  should be set to either "text/x-vcard" (default) or "text/vcard".  Maps to "CTType"
  element under the "RemoteDB" element for contacts.

  OTASYNCML_CONTACTS_CTVER - Specfies the version number of the MIME content type being
  used.  Maps to the "CTVer" element under the "RemoteDB" element for contacts.  The
  default is "2.1" when OTASYNCML_CONTACTS_CTTYPE is "text/x-vcard", or "3.0" when
  the content type is "text/vcard".

  OTASYNCML_CONTACTS_NAME - Specifies the display name of the contacts database.
  Maps to the "Name" element under the "RemoteDB" element for contacts.

  OTASYNCML_CONTACTS_USERNAME - Specifies a user name for access to the contacts
  database.  If specified, an "Auth" element is created under the "RemoteDB" element
  for contacts, and this value is specified as a "Username" sub-element.

  OTASYNCML_CONTACTS_PASSWORD - Specfies a password for access to the contacts
  database.  Maps to "Auth" / "Password" under the "RemoteDB" element for contacts.

  OTASYNCML_CONTACTS_AUTHSCHEME - Specifies the authentication scheme to be used for
  authenticating with the supplied username and password.  Maps to the "AuthScheme"
  setting under the "Auth" sub-element of the "RemoteDB" element for contacts.  Valid
  values are "1", "2", "BASIC" (mapped to "1"), or "DIGEST" (mapped to "2").

  OTASYNCML_CALENDAR_URI - Specifies the URI (relative to Sync Server URL or absolute)
  for Calendar.  Maps to the "URI" element in the specification, under a "RemoteDB"
  element that includes a "CTType" of either text/x-vcalendar or text/calendar.  On most
  phones this is referred to as the Calendar Database Name.

  OTASYNCML_CALENDAR_CTTYPE - Specifies the MIME content type for calendar.  This value
  should be set to either "text/x-vcalendar" (default) or "text/calendar".  Maps to "CTType"
  element under the "RemoteDB" element for calendar.

  OTASYNCML_CALENDAR_CTVER - Specfies the version number of the MIME content type being
  used.  Maps to the "CTVer" element under the "RemoteDB" element for calendar.  The
  default is "1.0" when OTASYNCML_CALENDAR_CTTYPE is "text/x-vcalendar", or "2.0" when
  the content type is "text/calendar".

  OTASYNCML_CALENDAR_NAME - Specifies the display name of the calendar database.
  Maps to the "Name" element under the "RemoteDB" element for calendar.

  OTASYNCML_CALENDAR_USERNAME - Specifies a user name for access to the calendar
  database.  If specified, an "Auth" element is created under the "RemoteDB" element
  for calendar, and this value is specified as a "Username" sub-element.

  OTASYNCML_CALENDAR_PASSWORD - Specfies a password for access to the calendar
  database.  Maps to "Auth" / "Password" under the "RemoteDB" element for calendar.

  OTASYNCML_CALENDAR_AUTHSCHEME - Specifies the authentication scheme to be used for
  authenticating with the supplied username and password.  Maps to the "AuthScheme"
  setting under the "Auth" sub-element of the "RemoteDB" element for calendar.  Valid
  values are "1", "2", "BASIC" (mapped to "1"), or "DIGEST" (mapped to "2").

  OTASYNCML_SERVER_USERNAME - Specifies a user name for access to the SyncML Server.
  If specified, an "Auth" element is created with an "AuthLevel" of "1", and this
  value is specified as a "Username" sub-element.

  OTASYNCML_SERVER_PASSWORD - Specfies a password for access to the SyncML Server.
  Maps to the "Password" element under an "Auth" element with the "AuthLevel" set to "1".

  OTASYNCML_SERVER_AUTHSCHEME - Specifies the authentication scheme to be used for
  authenticating with the supplied username and password.  Maps to the "AuthScheme"
  setting under the corresponding "Auth" element.  Valid values are "1", "2", "BASIC"
  (mapped to "1"), or "DIGEST" (mapped to "2").

  OTASYNCML_HTTP_USERNAME - Specifies a user name for HTTP Authentication on the SyncML
  request.  If specified, an "Auth" element is created with an "AuthLevel" of "2", and this
  value is specified as a "Username" sub-element.

  OTASYNCML_HTTP_PASSWORD - Specfies a password for HTTP Authentication.
  Maps to the "Password" element under an "Auth" element with the "AuthLevel" set to "2".

  OTASYNCML_HTTP_AUTHSCHEME - Specifies the authentication scheme to be used for
  authenticating with the supplied username and password.  Maps to the "AuthScheme"
  setting under the corresponding "Auth" element.  Valid values are "1", "2", "BASIC"
  (mapped to "1"), or "DIGEST" (mapped to "2").

  OTASYNCML_OBEX_USERNAME - Specifies a user name for OBEX Authentication on the SyncML
  request.  If specified, an "Auth" element is created with an "AuthLevel" of "3", and this
  value is specified as a "Username" sub-element.

  OTASYNCML_OBEX_PASSWORD - Specfies a password for HTTP Authentication.
  Maps to the "Password" element under an "Auth" element with the "AuthLevel" set to "3".

  OTASYNCML_OBEX_AUTHSCHEME - Specifies the authentication scheme to be used for
  authenticating with the supplied username and password.  Maps to the "AuthScheme"
  setting under the corresponding "Auth" element.  Valid values are "1", "2", "BASIC"
  (mapped to "1"), or "DIGEST" (mapped to "2").

  OTASYNCML_CONREF_CONTYPE - Maps to the "ConType" sub-element of the "ConRef" element.
  Specify "1" when the data connection is a WAP Proxy, or "2" when the data connection
  is an HTTP Proxy.

  OTASYNCML_CONREF_REFID - Maps to the "RefID" sub-element of the "ConRef" element.
  Specifies the name of the connection profile in the mobile phone to be used for SyncML.

  OTASYNCML_CONREF_BEARER - Maps to the "Bearer" sub-element of the "ConRef" element.

  OTASYNCML_CONREF_ADDRTYPE - Maps to the "AddrType" sub-element of the "ConRef" element.

  OTASYNCML_CONREF_ADDR - Maps to the "Addr" sub-element of the "ConRef" element.

* May 22, 2003:  MMS/Multimedia WAP Push - Fix for image conversion not always working
  properly on animated GIFs (especially when converting to WBMP).

* May 24, 2003:  Add support for specifying a PIN when configuring a GSM modem.
  (Note:  With some GSM modems, particularly the SonyEricsson T68i, note that
  the modem driver will refuse to initialise if a PIN is configured on the phone.
  The only solution around this problem is to configure NowSMS to talk to the modem
  directly.)

* May 28, 2003:  Update UCP/EMI driver with an alternate option for submitting long SMS
  text messages to work around situation where some users are getting garbage messages
  on long SMS text messages.  Create [UCP] section header in SMSGW.INI, and add
  LongSMSTextEncoding=Yes.

* May 28, 2003:  Implement work-around for problem receiving SMS/MMS messages with
  at least some versions of the Sierra Wireless Aircard 750, when the SMS sender address
  is in alphanumeric format.  The modem encodes the sender address length incorrectly, and
  these messages cannot be properly decoded.  To enable this logic, manually edit
  SMSGW.INI, and under a section header for your modem (e.g., [Modem - Modem Name here]),
  add AlphaSenderAddressBug=Yes to activate logic that will work-around the problem.
  (Note:  If a [Modem - Modem Name Here] section does not exist in your INI file, return
  to the NowSMS configuration screen.  Highlight the modem, and select Properties.  Define
  a "Phone Number:" associated with the modem,  Click Ok, then Apply or Ok to save the
  changes.  The modem section should now exist in the SMSGW.INI file.)

* May 30, 2003:  Fix for a bug introduced in v4.20, where the gateway had problems working
  through a proxy server to connect to an HTTP SMSC.

* June 11, 2003:  Allow received binary messages to be processed by a 2-way command.  Note
  that no binary messages will be passed to a 2-way command unless the 2-way command includes
  a replaceable parameter setting named "@@Binary@@".  This replaceable parameter will be
  set to "1" for binary messages, and "0" for text messages.  Additional replaceable parameters
  supported include @@DCS@@, @@PID@@ and @@UDH@@ (user data header).

* June 11, 2003:  SMPP Server:  Add SMSGW.INI parameter under [SMSGW] section header,
  SMPP34Server=Yes setting causes the gateway to include the SMPP v3.4 flag setting in the
  bind response.  (By default, no version flag is included, implying SMPP v3.3 support.)

* June 16, 2003:  Send Text Message HTML template updated to include a character counter
  to indicate how many SMS messages are required to send the message.

* July 2, 2003:  There are 14 upper case Greek characters that can be easily mapped
  into English/Latin character equivalents in the GSM SMS alphabet.  Perform this
  conversion so that Greek messages in all upper case can go out via SMS without
  requiring Unicode encoding.

* July 6, 2003:  Add support to allow users to send messages to distribution lists
  when sending via the "SMTP AUTH" interface.  Users only have access to distribution
  lists created under the same account name as is being logged into via "SMTP AUTH".

* July 7, 2003:  Include the ability to define a default UAProf file for MMS content
  conversion when a phone does not send either a "Profile:" or "User-Agent:" header.
  Edit the UAMAP.INI file in the UAProf subdirectory of the gateway installation.
  Under the [UAMap] section header, add an entry *=filename.xml, where "filename.xml"
  is the name of a UAProf XML document that is located in the UAProf subdirectory.

* July 7, 2003:  Multimedia WAP push:  Allow message text to include WML formatting
  tags.  For any formatting tags included in message text, surround the tag with
  three bracket (i.e., [ and ] characters) on each side of the tag.  For example,
  "[[[b]]]" will be converted to "<b>" (whereas "<b>" would be converted to "&lt;b&gt;"
  for literal display).  This setting should be used with caution ... be sure to
  close any tags that you open.

* July 10, 2003:  Fix for a memory leak error that would occur each time a GSM modem
  was "re-initialized".

* Add feature to the "Send Text Message" template to allow replacement type messages
  to be submitted via the web menu interface.

* July 17, 2003:  Add configuration parameters for relocating some directories from
  their default locations:

  In SMSGW.INI under [SMSGW] header:
  MMSDir=d:\path\       ==> Indicates location for storing received MMS messages
                            (default is MMS-IN subdirectory)
  QDir=d:\path\          ==> Indicates location for outbound SMS message queue
                            (default is Q subdirectory)
  LogDirectory=d:\path\ ==> Indicates location for log files (except debug logs)
                            (default is program directory)

  In MMSC.INI under [MMSC] header:
  DataDir=d:\path\      ==> Indicates location under which in-transmit MMS messages
                            should be stored (default is MMSCDATA subdirectory)
  LogDirectory=d:\path\ ==> Indicates location for log files (except debug logs)
                            (default is program directory)

* July 17, 2003:  MMS messages and multimedia WAP push messages can now be submitted
  via HTTP GET requests, in addition to the existing HTTP POST.  To submit via 
  HTTP GET, reference an "http://" URL in the MMSFILE parameter.  (e.g.,
  http://gateway.ip:port/?PhoneNumber=xxxx&MMSFile=http://server/filename.jpg&MMSSubject=Test+Message)
  The MMSFILE parameter can be included multiple times.  Note that the "http://"
  may need to be escaped in some environments, for those environments use
  a URL escaped format like this:  "MMSFILE=http%2F%3A%3Aserver/filename.jpg".

* Add MMS message size to the MMSC log files.

* Improved pattern matching for routing recipient addresses to different
  SMSC connections.  For example, if SMSC connection #1 has a recipient address
  of "+44* defined as a "Preferred SMSC connection", and SMSC connection #2
  has "+441624*" defined, then routing to +441624000000 would occur through
  connection #2 only.  Previously, with these definitions, a pattern match
  would exist for both connection #1 and #2 and the message could be routed
  via either.

* Add SMSGW.INI parameter, [SMSGW] ReceiveSMSCharaset=xxxx, where xxxx is one
  of the following character sets:  iso-8859-1, us-ascii, big5, big-5,
  gbk, gb2312, gb2312-80, shift-jis, shift_jis, iso-8859-2, niso-8859-4,
  iso-8859-5, iso-8859-6, iso-8859-7, iso-8859-8, iso-8859-9.
  When this value is specified, received text will be passed to any configured
  "Receive SMS Command To Execute" using this character set, instead of UTF-8.

* Problems sending vCard Business Cards to some Nokia phones.  HTML template
  updated to ensure that a carriage return-line feed is always present at the
  end of the vCard data.

* Add SMSGW.INI parameter for SMPP systems that expect text messages to be
  submitted in packed GSM 7-bit format instead of normal text format (observed
  with Vodafone Ireland's SMPP server).  Under the appropriate [SMPP - host:port]
  section header, add GSMPack=Yes to enable this setting for a particular
  SMPP connection.

* SMTP Server in MMSC will only bind to the IP address configured for the MMSC.
  (Previously it would bind to all addresses on the PC.)

* Additional MMSC.INI parameters to specify "alias" domain names for receiving
  MMS and SMS messages.  Under the [MMSC] section header, DomainNameAlias1= thru
  DomainNameAlias10= settings can be used to specify alternate domain names for
  receiving MMS messages.  Also, SMSDomainNameAlias1= thru SMSDomainNameAlias10=
  can be used to specify alternate domain names for receiving SMS messages.


Now SMS/MMS Gateway v4.20 Release Notes
=======================================

* SMSGWS:  Remove HTTP redirect response from "Send MMS Message"
  function.  This was causing authorization header problems for some
  developers who were issuing this request outside of a browser context.

* MMSC:  Change response to m-notifyresp-ind message to stop Panasonic
  GD87 from reporting "Receive Failed" after downloading an MMS message
  (even though the message was always downloaded completely).

* SMPP:  Support for receiving messages when the message payload interface
  is used.

* MMSC:  Add support for parsing the MSISDN header from an Ericsson WAP
  gateway.  When using the MSISDNHeader setting in the MMSC.INI file, add
  MSISDNHeaderEricssonFormat=Yes to read the MSISDN from an Ericsson WAP gateway.
  When this setting is specified, the gateway expects to find an MSISDN
  header that starts with an IP address, followed by the actual MSISDN in
  hexadecimal format (e.g., MSISDN: 10.5.148.5 3430373233313830353332, which
  this setting will cause the MMSC to parse as 40723180532).

* MMSC:  Add support for parsing the MSISDN header from a Nokia WAP gateway.
  When using the MSISDNHeader setting in the MMSC.INI file (normally set to
  X-Network-Info for a Nokia WAP gateway), add MSISDNHeaderNokiaFormat=Yes to
  read the MSISDN from a Nokia WAP Gateway.  When this setting is specified,
  the gateway expects to find an an MSISDN header that starts with some text,
  followed by a comma, followed by the MSISDN and optionally additional data
  after another comma (e.g., X-Network-Info: CSD, 5439459559,unsecured will
  parse as 5439459559).

* MMSC:  In the MMS to e-mail interface, return an error if the SMTP relay server
  reports an error accepting a message.

* SMSGWS:  Fix for "Send MMS Message" function not working properly if user
  connects to http://localhost to send the message.

* SMSGWS:  Add statistic tracking of the number of messages sent out each defined
  SMSC connection.

* Improved compatibility with Windows Terminal Server.  Previously the configuration
  program could not correctly detect if a service was active when running under
  a Terminal Server session.

* Add setting for default value for "Data Coding Scheme" (DCS) when sending binary
  messages.  Default is F5 (hex).  Can be set in SMSGW.INI as BinaryDCS=xx, where xx
  is a hexadecimal value.  A particular US service would not route binary messages
  unless DCS was set to 2 or 4.

* UCP/EMI:  Extended characters were not always encoded properly in outbound text
  messages, resulting in "Syntax Error" responses from the SMSC.

* E-Mail to SMS:  Expand the character sets supported by this interface.

* E-Mail to SMS:  Fix problem with messages being copied to extra recipients when
  an SMTP server sends multiple messages over a single SMTP connection.

* 2-way SMS:  When receiving messages, if the SMS message text includes carriage
  return or line feed characters, we need to remember to escape them for transmission
  to an HTTP command.

* SMSGW:  Fix for some character encoding problems when submitting MMS messages via
  the web menu interface.

* SMSGW:  Add support for absolute credit balances on "SMS User" accounts, instead of
  just monthly and daily limits.

* SMSGW:  Add login restriction by IP address for "SMS User" accounts.

* Add support for multimedia WAP push.  New form added for submitting content.  Also,
  via the e-mail interface, a multimedia WAP push can be sent similar to how an MMS is
  sent by appending ".wappush" to the user portion of the recipient e-mail address.
  (Example:  447778001210.wappush@mms.gateway.domain)

* SMPP Server:  Remove support for SMPP server (when SMPP clients connect to NowSMS as
  the SMPP server) initiating "enquire link" requests to connected clients.  Some
  primitive SMPP clients like the Nokia WAP Push Proxy Gateway can initiate "enquire
  link" but cannot respond to it.

* MMSC:  Add support for generating WAP push and MMS notifications requests via a WAP
  Push Proxy Gateway using PAP (Push Access Protocol).  Documentation for configuring
  this interface available at http://www.nowsms.com/tb/tb-nowsms-007.htm.

* SMSGW:  Fix for memory leak that would occur when connecting to a "2-way" HTTP
  command to receive inbound messages, and the command returned an HTTP error or an
  HTTP redirect response.

* SMSGW:  Add additional options for WAP Push via the menu interface.  Add support for
  "Service Load" from the web menu interface in addition to existing "Service Indication"
  support.  Add support for setting the "si-id" for a "Service Indication" push, settable
  via the HTTP variable WAPSIID.  Add support for setting the signal action for "Service
  Indication" push, settable via the HTTP variable WAPSIACTION, with possible values of
  "signal-none", "signal-low", "signal-medium", "signal-high", and "delete".  Add support
  for execute action for "Service Load" push, settable via the HTTP variable WAPSLACTION,
  with possible values of "execute-high", "execute-low" and "cache".  Add support for
  "si-expires" and "created" attributes for "Service Indication" push, settable via
  the HTTP variables WAPSIEXPIRES and WAPSICREATED, both of which accept a date/time
  in the format:  YYYY-MM-DDThh:mm:ssZ (where "T" and "Z" are literal characters).

* SMSGWS:  More character set handling issues.  10 Greek characters are part of the
  GSM 7-bit character set.  If any of these characters were present in an outbound SMS
  message, the gateway would use less efficient Unicode encoding for the message, even
  though it was not required.  Also, if any of these 10 characters were in a 7-bit
  SMS message received by the gateway, they would not be received correctly.  This has
  been fixed.

* SMSGWS:  Fix for a 250 character (125 byte) limit on UDH size.

* MMSC:  Fix for an exception error that could occur under heavy load when multiple
  messages were being received simultaneously.  This error would cause the gateway
  service to restart.

* MMSC:  Add support for wildcard MIME type entries in UAProf parsing for content
  conversion (e.g., video/*).

* SMSGWS:  Add support for received SMS messages to be routed to an e-mail address.
  Configure a receive command in the "2-way" dialog, with the "Command to Execute"
  set to "mailto:user@domain", and received messages that match the defined prefix
  will be sent via e-mail to "user@domain".  (Note:  This feature sends outbound
  e-mail via the MMSC, so the MMSC must be active to support this feature.)

* SMSGWS:  Add support for CIMD2 protocol for connecting to SMSCs.

* MMSC:  Delivery receipt formatted updated to support standard delivery
  receipt format according to the MMS specification.

* MMSC:  Add configuration file option to set a limit on the size of MMS
  messages submitted through the MM1 interface.  In MMSC.INI, under the [MMSC]
  section header, parameter MMSMessageSizeLimit=### is supported, where ###
  is the maximum size MMS message (in KB) that will be accepted by the system.

* SMSGWS & MMSC:  Add support for LogDirectory=d:\path setting in both SMSGW.INI
  and MMSC.INI (under [SMSGW] and [MMSC] section headers).  This setting specifies
  the directory into which log files should be written.  (Note:  This does not
  apply to the debug logs, only the standard log files.)

* SMSGWS:  Receive MMS flag is ignored by the gateway.  If "Receive SMS" is enabled,
  the gateway would automatically parse inbound MMS messages even if "Receive MMS"
  was not enabled.

* SMSGWS:  Add support for ReplyRequested=Yes parameter when submitting an SMS
  message to the NowSMS gateway.  This sets the "reply path" parameter when the
  messages is submitted to the SMSC.  Note that while this parameter does cause
  the phone to treat the message as one that requests a reply, it also has the effect
  of telling the recipient device to reply through your SMSC.  Therefore your SMSC
  may either ignore this setting, or it may reject messages with this setting.

* SMSGWS:  Improved handling of simultaneous send/receive on GSM modem connections.
  Previously if the gateway was busy sending out messages, it would significantly
  delay the processing of received messages.

Now SMS/MMS Gateway v4.11 Release Notes
=======================================

* SMSGW:  Add support for WAP Push and MMS notification to an IP address

* MMSC:  Add MIME-Version: 1.0 to e-mail header when sending a message
  to e-mail.

* SMSGWS:  "Host:" Header was not being included in connections to HTTP
  SMSCs, causing a problem for connections to multi-homed web sites.

* MMSC:  Support Delivery Notification receipts when requested for
  MMS messages.  For messages submitted via SMTP, delivery notification
  receipts will only be generated if the SMTP message submitted includes
  an "X-Mms-Delivery-Report: Yes", "Return-Receipt-To:" or
  "Disposition-Notification-To:" header (and the notification will be
  directed to the "From:" address).  Delivery notification receipts are
  currently not supported for messages submitted via HTTP.

* SMSGWS:  Improvements to native COM port initialization, in an effort
  to fix problems where the modem won't properly initialize if the gateway
  is configured to talk to a COM port directly without going through a
  modem driver.

* SMSGWS:  WAP OTA no longer requires OTA_URL.  Useful for sending MMS
  only settings out.

* SMSGWS:  Receive inbound MMS function was not working properly.  UDH
  header was not parsed correctly for MMS notification messages that
  required concatenated SMS messages.

* SMSGWS:  "Charset=" parameter now supported in URL requests to send
  messages, to override default requirement of UTF-8.  Supported character
  set values include:  iso-8859-1, us-ascii, big5, big-5, gbk, gb2312,
  gb2312-80, shift-jis, shift_jis, iso-8859-2, iso-8859-4, iso-8859-5,
  iso-8859-6, iso-8859-7, iso-8859-8, and iso-8859-9.

* MMS To e-mail conversion:  When encoding an attachment using quoted-printable
  encoding, make sure that all lines of text in the attachment end with CRLF.
  Found an installation where SMIL files were only ending each line of text
  with LF, and an e-mail server did not like this.

* SMSGWS:  GSM modem handling update.  Even when echo is turned off, some
  phone modems insist on echoing the PDU of a submitted message.  This was causing
  the gateway to report errors when using some phone modems including the
  Ericsson R520 and the Panasonic GD87.

* SMSGWS:  GSM modem handling update for receiving inbound SMS messages.  We
  were previously unable to receive messages from some phones.  Updated to
  better detect inbound messages.

* Distribution lists are now stored on a per user account basis.  Text files
  for distribution lists have been moved under DLists\Username subdirectory.

* SMSGWS:  Received messages with alpha sender were not being decoded correctly
  (a 2-way command could not reply to such a message anyway).

* SMSGWS:  Performance enhancements for GSM modem handling, especially when
  using devices that support "SMS over GRPS".  Sending tested in excess of 30
  messages per minute with SonyEricsson T68i configured to send SMS over GRPS.
  Receive message handling greatly increased (faster than sending).

* MMSC Admin:  Find function added to web interface to search for a user account
  without scrolling through list.

* MMSC:  Add support for "Short Codes" in the MMSC.INI file.  Short codes can be
  used to map a short phone number to a longer phone number or e-mail address.
  For example, a short code of 200 could be rerouted to an e-mail address.  To
  define short codes, create a section titled [ShortCode] in the MMSC.INI file.
  Under that section, create entries in the following format:
     ###=+44335830375474/TYPE=PLMN
     ###=user@domain.com
  In the examples above, "###" is a numeric short code address, and the value after
  the "=" sign is the address the short code should be rerouted to, specified as
  either a phone number in MMS addressing format (/TYPE=PLMN) or as an e-mail
  address.

* Add support for accounting callbacks that can be used to integrate the Now SMS/MMS
  gateway with external accounting systems.  The Now SMS/MMS Gateway can be configured
  to check for authorisation before accepting an SMS or MMS message for delivery, and
  also to notify an accounting system after the gateway has accepted a submitted
  message.  Documentation available at http://www.nowsms.com/tb/tb-nowsms-001.htm.

* Integrate operator version of Now MMSC with MMSC built into the Now SMS/MMS Gateway.
  Automatic account provisioning and MSISDN identification procedure documented at
  http://www.nowsms.com/tb/tb-nowsms-002.htm.

* MMSC:  Add MMSC.INI file setting to restrict access to the Web "Admin" interface
  by IP address.  Under the [MMSC] section header, added supported for
  AdminIPAddressList setting, which is a comma delimited list of IP addresses that
  are allowed access to the gateway.  Do not include any spaces between addresses.
  To specify a wildcard address for a subnet, use the "*" character (for example,
  192.168.1.* to allow all addresses in the 192.168.1 subnet).

* MMSC:  Additional HTTP-based MMSC user account provisioning interface added to
  compliment the existing menu driven "MMSC Admin" interface.  Interface documented
  at http://www.nowsms.com/tb/tb-nowsms-005.htm.


Now SMS/MMS Gateway v4.10 Release Notes
=======================================

* Fix: MMSC did not properly encode message from address for e-mail
  messages from addresses longer than 30 characters.

* UCP Connection to Server:  Report an error if local port is set,
  but port is not available.

* SMPP and UCP Connections to Server:  In configuration dialog, if service
  is active, prompt to stop the service to test connection.  (This is
  necessary because many SMSC connections will only allow one login at
  a time.  If the service is running and is already logged in, the
  configuration dialog cannot login to test the connection.)

* UCP Connection to Server:  Allow alphanumeric sender address values.

* Fixes for character set conversion issues executing "2-way" commands.
  HTTP commands will receive data from the gateway in UTF-8 format.
  If the HTTP command returns a "text/plain" response directly, it should
  return data using UTF-8 encoding.  Problems were encountered passing
  UTF-8 data on the command line for executable commands.  Executable
  commands receive data from the gateway in the local Windows code page,
  and if returning a response directly, should return the response using
  the local Windows code page.  To override the default Windows code
  page, edit SMSGW.INI, and under the [SMSGW] section header, add the
  statement DefaultCodePage=xxxx.  (For example, 950 for big5, 936 for gbk,
  or 1252 for western Europe.)

* UCP Receive Messages:  Update ACK message generated when receiving
  a message to include a date/time stamp.  Some SMSCs did not like the
  ACK message generated as the date/time stamp was not included.

* UCP Connection to Server:  Add "Keep-Alive" setting.  If set, the client
  will send a "keep alive" (UCP-31 MT Alert) message to the server every
  xx seconds for the configured number of seconds.

* MMSC:  When routing an e-mail message to MMS, if the content type of
  a message part is not a content type defined in MMSCTYPE.INI, check
  MMSCTYPE.INI to see if the file extension of the message part matches
  that of a content type defined in MMSCTYPE.INI, and if so, remap the
  content type during the conversion to MMS.  (This is necessary because
  e-mail clients don't always properly encode uncommon MIME types.)

* UCP Connection to Server:  Fix for rollover problem where the UCP
  transaction id was not always resetting to two digits after 99 transactions.

* Send Binary Message.htm form updated to correct error in DCS settings
  which should be F7 instead of 7F.

* Send Binary Message.htm form updated to allow larger binary data (form
  limit of 250 characters raised to 2000 characters).

* For binary SMS messages too large to fit in a single message, the gateway
  now automatically performs segmentation to split the data over multiple
  SMS messages.

* Option added for HTTP SMSC connections to let the external HTTP gateway
  perform its own segmentation of long messages.  When this option is
  selected, long messages will not be segmented by the local gateway.

* New HTML templates added for sending Nokia ring tones, operator logos,
  group icons and picture messages.

* MMSCOMP fix:  MMS messages without SMIL files that were sent to OpenWave
  browsers would not display attachments.

* MMSC:  Mapping of iCalendar objects to vCalendar objects when sent from
  e-mail to a mobile phone that only supports vCalendar.

* MMSC:  Fix for inability to retrieve User agent profile for Sharp GX10.
  HTTP retrieval of user agent profiles was not including a "Host:" header
  in the HTTP request.

* SMS Gateway 2-Way Commands:  Expand the HTTP URL command format so that
  it can include a username and password for automatic HTTP authentication
  using the URL format:  http://username:password@host.name/path/request.

* SMS Gateway 2-way Commands:  HTTP "Host:" header was not included in
  HTTP command requests, which could cause some multihomed web servers to
  be unable to return content.

* SMS Gateway:  Support binary messages with only UDH, but no message data.
  Useful for sending EMS ring tones.

* MMS to E-Mail Gateway:  Convert Unicode text parts to UTF-8 for wider
  compatibility with e-mail clients.

* Web Menu Interface:  Update to add support for creating and managing
  distribution lists.  Send message forms now also support sending to
  multiple recipients.  Enter either a distribution list name in the
  Phone number field, or enter multiple phone numbers separated by a
  comma (,) or semi-colon (;).

* MMSC:  T68i will not auto-play AMR files included in MMS SMIL files,
  if the name of the AMR file is longer than 16 characters (which is
  often the case with files sent from a Nokia 7650).  Content adapation
  engine now truncates filenames to 16 characters to provide
  improved compatibility.

* When HTTP Authenitication is enabled, the gateway now supports the
  ability to send the Username and password using URL parameters "User"
  and "Password" in addition to via the HTTP Authorization header.
  The "web menu" interface is only accessible using the HTTP Authorization
  header, but individual commands may be executed using only the "User"
  and "Password" URL parameters.

* MMS Content Adaptation enabled for Nokia 7650.  The Nokia 7650 does not
  transmit User Agent profile information.  A profile for the 7650 has
  been manually defined and included in this install.



Now SMS/MMS Gateway v4.01 Release Notes
=======================================

* Fix: When connecting to an SMPP SMSC, some GSM 7-bit text characters
  were not properly encoded.

* Fix: Carriage return and line feed characters present in an SMS
  message were triggering the SMS message to be encoded in Unicode
  format.

* Fix: Now SMS/MMS Gateway as an SMPP Server did not properly handle
  Unicode message submissions.

* Fix: WAP OTA support was not properly encoding the OTA_PORT parameter
  (used for session type = connection oriented/permanent or
  connection less/temporary).

* MMSC:  Fixed UAProf bug where if a UA Profile did not indicate
  a maximum supported MMS message size (T300), the maximum
  message size defaulted to 0.

* MMSC:  Added an option in image scaling to scale images to either the
  screen size or the max supported image size, as indicated by the
  UA Profile.  Many phones support larger images than the screen size,
  but on the T68i, if an image is larger than the screen size it is
  cropped in a window smaller than the screen size, while images that
  match the screen size are displayed full screen.

* When submitting a pre-compiled MMS message via e-mail or the web
  interface, the gateway will now transform "m-send-request" type
  messages to "m-retrieve-conf" messages, as some MMS compilers
  build messages in the "send" format, wheras a receiving client
  expects to receive the message in "retrieve" format.

* MMSC SMTP Server updated to remove 1000 recipient limit for bulk
  sends with SMTP AUTH.

* Added support for configuration parameter Nokia3510Compatible=No in
  MMSC.INI file.  (Default value is Yes.)  When MMS message notifications
  are sent via SMS in a way that is compatible with the Nokia 3510,
  this causes the notifications to be 31 bytes longer than the short
  notification format used in versions prior to v4.0.  The longer
  notifications cause more MMS notification messages to be sent out
  as multiple SMS messages instead of single SMS messages.  If Nokia
  3510 compatiblity is not important for your installation, use this
  setting to enable the shorter MMS notification message format.

* MMSUSER.EXE utility was incorrectly installed by the installation
  script as MMSUSER.DLL.

* Fix for 2-way "Receive MMS" not properly decoding MMS notifications
  generated by Now SMS/MMS Gateway versions 4.0 and higher.